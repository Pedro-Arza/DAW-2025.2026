<h1>Lista de Usuarios</h1>

@defer (on viewport) { @if (usuarios().length > 0) {
<div class="user-grid">
  @for (user of usuarios(); track user._id) {
  <div class="user-card">
    @let fullName = user.first_name + ' ' + user.last_name;
    <img [src]="user.image" [alt]="fullName" />
    <h3>{{ fullName }}</h3>
    <p>{{ user.email }}</p>

    <div class="action-buttons">
      <button class="btn btn-info" (click)="verDetalles(user._id)">Detalles</button>
      <button class="btn btn-warning" (click)="actualizarUsuario(user._id)">Actualizar</button>
      <button class="btn btn-danger" (click)="borrarUsuario(user._id)">Borrar</button>
    </div>
  </div>
  }
</div>

<!-- PaginaciÃ³n -->
<nav aria-label="Page navigation" class="mt-4">
  <ul class="pagination justify-content-center">
    <li class="page-item" [class.disabled]="page() === 1">
      <button class="page-link" (click)="changePage(page() - 1)">Anterior</button>
    </li>

    @for (p of [].constructor(totalPages()); track $index) {
    @let pageNum = $index + 1;
    <li class="page-item" [class.active]="page() === pageNum">
      <button class="page-link" (click)="changePage(pageNum)">{{ pageNum }}</button>
    </li>
    }

    <li class="page-item" [class.disabled]="page() === totalPages()">
      <button class="page-link" (click)="changePage(page() + 1)">Siguiente</button>
    </li>
  </ul>
</nav>
} @else {
<p>No se encontraron usuarios.</p>
} } @placeholder {
<p>Cargando componente de usuarios...</p>
} @loading (minimum 1s) {
<p>Obteniendo datos...</p>
} @error {
<p>Error al cargar los usuarios</p>
}
